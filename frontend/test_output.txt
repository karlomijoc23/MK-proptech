
> frontend@0.1.0 test
> CI=true craco test --watch=false --runInBand --detectOpenHandles src/__tests__/tenantSwitcher.test.jsx

[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`
  console.log
    DEBUG: Setting up window.location mock

      at Object.<anonymous> (src/__tests__/tenantSwitcher.test.jsx:76:11)

  console.log
    DEBUG: window.location is now {
      reload: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }
    }

      at Object.<anonymous> (src/__tests__/tenantSwitcher.test.jsx:82:11)

  console.log
    DEBUG: window.location is {
      reload: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }
    }

      at Object.<anonymous> (src/__tests__/tenantSwitcher.test.jsx:105:11)

  console.log
    DEBUG: Setting up window.location mock

      at Object.<anonymous> (src/__tests__/tenantSwitcher.test.jsx:76:11)

  console.log
    DEBUG: window.location is now {
      reload: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)]
      }
    }

      at Object.<anonymous> (src/__tests__/tenantSwitcher.test.jsx:82:11)

FAIL src/__tests__/tenantSwitcher.test.jsx
  âœ• loads tenants and triggers change handler (33 ms)
  âœ• disables profile management for non-admin roles (6 ms)

  â— loads tenants and triggers change handler

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    [0m [90m 110 |[39m   useEntityStore[33m.[39mmockReturnValue(storeMock)[33m;[39m
     [90m 111 |[39m
    [31m[1m>[22m[39m[90m 112 |[39m   render([33m<[39m[33mTenantSwitcher[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m     |[39m         [31m[1m^[22m[39m
     [90m 113 |[39m
     [90m 114 |[39m   [36mawait[39m waitFor(() [33m=>[39m expect(api[33m.[39mgetTenants)[33m.[39mtoHaveBeenCalled())[33m;[39m
     [90m 115 |[39m[0m

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8622:13)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10643:15)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/tenantSwitcher.test.jsx:112:9)
      at TestScheduler.scheduleTests (node_modules/@jest/core/build/TestScheduler.js:333:13)
      at runJest (node_modules/@jest/core/build/runJest.js:404:19)
      at _run10000 (node_modules/@jest/core/build/cli/index.js:320:7)
      at runCLI (node_modules/@jest/core/build/cli/index.js:173:3)

  â— disables profile management for non-admin roles

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    [0m [90m 139 |[39m   useEntityStore[33m.[39mmockReturnValue(storeMock)[33m;[39m
     [90m 140 |[39m
    [31m[1m>[22m[39m[90m 141 |[39m   render([33m<[39m[33mTenantSwitcher[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m     |[39m         [31m[1m^[22m[39m
     [90m 142 |[39m
     [90m 143 |[39m   [36mawait[39m waitFor(() [33m=>[39m expect(api[33m.[39mgetTenants)[33m.[39mtoHaveBeenCalled())[33m;[39m
     [90m 144 |[39m[0m

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8622:13)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10643:15)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/__tests__/tenantSwitcher.test.jsx:141:9)
      at TestScheduler.scheduleTests (node_modules/@jest/core/build/TestScheduler.js:333:13)
      at runJest (node_modules/@jest/core/build/runJest.js:404:19)
      at _run10000 (node_modules/@jest/core/build/cli/index.js:320:7)
      at runCLI (node_modules/@jest/core/build/cli/index.js:173:3)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 2 total
Snapshots:   0 total
Time:        1.102 s
Ran all test suites matching /src\/__tests__\/tenantSwitcher.test.jsx/i.
